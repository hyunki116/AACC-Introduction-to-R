---
title: "Introduction to R"
author: "Joe Rudolf"
date: "5/22/2018"
output: html_document
---

# What is R?

R is a statistical programming language.  Using R you can load, analyze, and visualize data.  R has the same functionality you are used to in other spreadsheet applications (e.g. Microsoft Excel) but offers greater functionality and flexibility.  R also provides an environment in which we can conduct reproducible data analysis.  R affords us the capabilities to document our data analysis and save it in a way that we can revisit our analysis at a later date, update our approach when inspiration strikes, and share our analysis with friends. 

# Installing R (and some other stuff to make R work)

## 1.  R

R is the programming language that we will be using to conduct our data analysis today.

To install R, go to the [Comprehensive R Archive Network (CRAN)](https://cloud.r-project.org]).  Select the version of R for your operating system (Windows, Mac OS, Linux)

## 2.  RStudio

R studio is the development environment in which we will do our R programming.

Download and install [RStudio](https://www.rstudio.com/products/rstudio/download/#download).  Select the installer for your Operating System.

When you launch RStudio you will be presented with with a series of windows.

On the left you will see the *console*.  The console is where we will enter and execute our R code.  

The lower right window contains the *output*.  This is where the results of our code (e.g. our plots) will display.  

The window in the upper right corner of the screen contains our *history*.  Here we can see the historical record of the code we have executed in the console. 

## 3.  The Tidyverse

To enhance the functionality of R, we need to install additional packages.  A package is a collection of functions that extend the capabilities of the base R programming language.

In this course we will be using the tidyverse package.  The tidyverse includes functions for reading data into the R environment, cleaning and manipulating data, and plotting our results.

Installing the tidyverse package is as easy as entering the following line of code in the RStudio console (the box on the left hand side of RStudio) and pressing the return (enter) key.

```{r, eval=FALSE}
install.packages("tidyverse")
```

# Configuring the RStudio Environment

## Setting the Working Directory

Let's create a folder on our desktop called "R_intro" in which to save our work today.  Now let's establish our R_intro folder as our working directory.

A working directory is where R will read our data from and save our work to.  Let's set our working directory to to the R_intro folder in RStudio (Session -> Set Working Directory -> Choose Directory).

We can check to see that we have set the correct working directory by running the following code in the console.

```{r}
getwd()
```

## Loading the tidyverse

We have previously installed the tidyverse package but to use the package in our analysis we need to load it during the session we intend to use the functions in.

Let's load the tidyverse with the following code.

```{r}
library(tidyverse)
```

# Basics of coding

In its most basic form R is a calculator

```{r}
2 + 3 + 2
```

R supports a number of functions (e.g. the absolute value function) that can extend our calculator

```{r}
abs(-77)
```

We can creat variables (objects) and use them in our calculations.

To do this we use the following syntax (grammar):  

variable_name <- variable

For example:

```{r}
# Establish the variable
sequence_one_to_twenty <- seq(1, 20)

# Check the contents of the variable
sequence_one_to_twenty

# Calculate the median of the sequence
median(sequence_one_to_twenty)

# Calculate the max of the sequence
max(sequence_one_to_twenty)

```

Learning to write code (including the functions available to you and the appropriate syntax to make your code work) can be frustrating!  Learning a new language takes time so be patient with yourself.  We all go through this process and your intution improves with your experience.


# Creating reproducible data analyis

Entering code in the console is a great way to iterate your analysis.  However, to truly make your code reproducible, we need to place it in an R script.  Scripts are files that we can edit, save, and execute.

## Creating an R Script

Let's create a simple script together.

Go to the menu bar at the top of the screen (File -> New File -> R Script).  

Copy and paste the following code into your script.

```{r}
#Load a data set of cars into a dataframe
cars <- as_tibble(mtcars)

#Fiter the list to cars with fuel economy >= 15 mpg and horsepower >=100
mpg_hp <-filter(mtcars, mpg >= 15, hp >=100)

#Create a scatter plot of mpg vs horsepower 
ggplot(data = mpg_hp) + geom_point(mapping = aes(x = mpg, y = hp))
```

Now let's save our script (File -> Save As) as "Simple_Script.R"

## Running our code

We can run the code using the "Run" button in the script window or by pasting it into the console window.

What if we wanted to look at mpg >= 10 and re-run the analysis?

